"use strict";(self.webpackChunkchaos_mesh_website=self.webpackChunkchaos_mesh_website||[]).push([["3679"],{27682:function(e,s,a){a.r(s),a.d(s,{frontMatter:()=>d,toc:()=>l,default:()=>u,metadata:()=>t,assets:()=>i,contentTitle:()=>h});var t=JSON.parse('{"id":"persistence-dashboard","title":"\u6301\u4E45\u5316 Chaos Dashboard \u6570\u636E","description":"\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u6301\u4E45\u5316 Chaos Dashboard \u6570\u636E\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.8.0/persistence-dashboard.md","sourceDirName":".","slug":"/persistence-dashboard","permalink":"/zh/docs/persistence-dashboard","draft":false,"unlisted":false,"editUrl":"https://github.com/chaos-mesh/website/edit/master/i18n/zh/docusaurus-plugin-content-docs/version-2.8.0/persistence-dashboard.md","tags":[],"version":"2.8.0","frontMatter":{"title":"\u6301\u4E45\u5316 Chaos Dashboard \u6570\u636E"},"sidebar":"docs","previous":{"title":"Expose Chaos Dashboard with Ingress","permalink":"/zh/docs/expose-dashboard-with-ingress"},"next":{"title":"\u5378\u8F7D Chaos Mesh","permalink":"/zh/docs/uninstallation"}}'),n=a(23420),r=a(18407),o=a(20134);let d={title:"\u6301\u4E45\u5316 Chaos Dashboard \u6570\u636E"},h,i={},l=[{value:"SQLite\uFF08\u9ED8\u8BA4\u5B58\u50A8\uFF09",id:"sqlite\u9ED8\u8BA4\u5B58\u50A8",level:2},{value:"MySQL",id:"mysql",level:2},{value:"PostgreSQL",id:"postgresql",level:2},{value:"\u914D\u7F6E\u6570\u636E\u8FC7\u671F\u65F6\u95F4",id:"\u914D\u7F6E\u6570\u636E\u8FC7\u671F\u65F6\u95F4",level:2}];function c(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u6301\u4E45\u5316 Chaos Dashboard \u6570\u636E\u3002"}),"\n",(0,n.jsxs)(s.p,{children:["Chaos Dashboard \u652F\u6301 ",(0,n.jsx)(s.code,{children:"SQLite"}),"\u3001",(0,n.jsx)(s.code,{children:"MySQL"})," \u548C ",(0,n.jsx)(s.code,{children:"PostgreSQL"})," \u4F5C\u4E3A\u540E\u7AEF\u6570\u636E\u5B58\u50A8\u3002"]}),"\n",(0,n.jsx)(s.h2,{id:"sqlite\u9ED8\u8BA4\u5B58\u50A8",children:"SQLite\uFF08\u9ED8\u8BA4\u5B58\u50A8\uFF09"}),"\n",(0,n.jsxs)(s.p,{children:["Chaos Dashboard \u9ED8\u8BA4\u4F7F\u7528 ",(0,n.jsx)(s.code,{children:"SQLite"})," \u4F5C\u4E3A\u540E\u7AEF\u5B58\u50A8\uFF0C\u5E76\u63A8\u8350\u4E3A ",(0,n.jsx)(s.code,{children:"SQLite"})," \u914D\u7F6E\u5355\u72EC\u7684",(0,n.jsx)(s.a,{href:"https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/",children:"\u6301\u4E45\u5377 (PV)"})," \u3002\u5982\u9700\u8981\u914D\u7F6E PV\uFF0C\u8BF7\u5728\u5B89\u88C5\u7684\u65F6\u5019\u6307\u5B9A ",(0,n.jsx)(s.code,{children:"dashboard.persistentVolume.enabled"})," \u4E3A ",(0,n.jsx)(s.code,{children:"true"})," \u548C\u8BBE\u7F6E\u5176\u4ED6 PV \u76F8\u5173\u7684\u914D\u7F6E\u3002",(0,n.jsx)(s.a,{href:"https://github.com/chaos-mesh/chaos-mesh/blob/master/helm/chaos-mesh/values.yaml#L255-L282",children:(0,n.jsx)(s.code,{children:"value.yaml"})})," \u4E2D PV \u76F8\u5173\u7684\u914D\u7F6E\u5982\u4E0B\uFF1A"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:'dashboard:\n  ...\n  persistentVolume:\n    # If you are using SQLite as your DB for Chaos Dashboard, it is recommended to enable persistence.\n    # If enable, the chart will create a PersistenceVolumeClaim to store its state in. If you are\n    # using a DB other than SQLite, set this to false to avoid allocating unused storage.\n    # If set to false, Chaos Mesh will use an emptyDir instead, which is ephemeral.\n    enabled: true\n\n    # If you\'d like to bring your own PVC for persisting chaos event, pass the name of the\n    # created + ready PVC here. If set, this Chart will not create the default PVC.\n    # Requires server.persistentVolume.enabled: true\n    existingClaim: ""\n\n    # Chaos Dashboard data Persistent Volume size.\n    size: 8Gi\n\n    # Chaos Dashboard data Persistent Volume Storage Class.\n    # If defined, storageClassName: <storageClass>\n    storageClassName: standard\n\n    # Chaos Dashboard data Persistent Volume mount root path\n    mountPath: /data\n\n    # Subdirectory of Chaos Dashboard data Persistent Volume to mount\n    # Useful if the volume\'s root directory is not empty\n    subPath: ""\n'})}),"\n",(0,n.jsx)(s.admonition,{title:"\u8B66\u544A",type:"warning",children:(0,n.jsx)(s.p,{children:"\u5982\u679C\u4E0D\u914D\u7F6E PV \u7684\u60C5\u51B5\u4E0B\uFF0CChaos Dashboard \u53D1\u751F\u91CD\u542F\uFF0C\u6570\u636E\u5C06\u51FA\u73B0\u4E22\u5931\uFF0C\u5E76\u4E14\u65E0\u6CD5\u627E\u56DE\u3002"})}),"\n",(0,n.jsx)(s.h2,{id:"mysql",children:"MySQL"}),"\n",(0,n.jsxs)(s.p,{children:["Chaos Dashboard \u652F\u6301\u4F7F\u7528 MySQL 5.6 \u6216\u8005\u66F4\u9AD8\u7248\u672C\u4F5C\u4E3A\u540E\u7AEF\u5B58\u50A8\u3002\u82E5\u60F3\u4F7F\u7528 MySQL \u4F5C\u4E3A\u540E\u7AEF\u5B58\u50A8\uFF0C\u53EF\u4EE5\u5728\u5B89\u88C5\u7684\u65F6\u5019\u8BBE\u7F6E ",(0,n.jsx)(s.code,{children:"dashboard.env.DATABASE_DRIVER"})," \u548C ",(0,n.jsx)(s.code,{children:"dashboard.env.DATABASE_DATASOURCE"})," \u53C2\u6570\uFF0C\u5177\u4F53\u53C2\u6570\u914D\u7F6E\u8BF7\u53C2\u8003[\u5B98\u65B9\u9A71\u52A8\u6587\u6863(",(0,n.jsx)(s.a,{href:"https://github.com/go-sql-driver/mysql#dsn-data-source-name",children:"https://github.com/go-sql-driver/mysql#dsn-data-source-name"}),")"," \u3002"]}),"\n",(0,n.jsx)(o.A,{children:"helm install chaos-mesh chaos-mesh/chaos-mesh -n=chaos-mesh --version latest --set dashboard.env.DATABASE_DRIVER=mysql --set dashboard.env.DATABASE_DATASOURCE=root:password@tcp(1.2.3.4:3306)/chaos-mesh?parseTime=true"}),"\n",(0,n.jsx)(s.h2,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,n.jsxs)(s.p,{children:["Chaos Dashboard \u652F\u6301\u4F7F\u7528 PostgreSQL 9.6 \u6216\u8005\u66F4\u9AD8\u7248\u672C\u4F5C\u4E3A\u540E\u7AEF\u5B58\u50A8\u3002\u82E5\u60F3\u4F7F\u7528 PostgreSQL \u4F5C\u4E3A\u540E\u7AEF\u5B58\u50A8\uFF0C\u53EF\u4EE5\u5728\u5B89\u88C5\u7684\u65F6\u5019\u8BBE\u7F6E ",(0,n.jsx)(s.code,{children:"dashboard.env.DATABASE_DRIVER"})," \u548C ",(0,n.jsx)(s.code,{children:"dashboard.env.DATABASE_DATASOURCE"})," \u53C2\u6570\uFF0C\u5177\u4F53\u53C2\u6570\u914D\u7F6E\u8BF7\u53C2\u8003 ",(0,n.jsx)(s.a,{href:"https://github.com/go-sql-driver/mysql#dsn-data-source-name",children:"libpq connect"}),"\u3002"]}),"\n",(0,n.jsx)(o.A,{children:"helm install chaos-mesh chaos-mesh/chaos-mesh -n=chaos-mesh --version latest --set dashboard.env.DATABASE_DRIVER=postgres --set dashboard.env.DATABASE_DATASOURCE=postgres://root:password@1.2.3.4:5432/postgres?sslmode=disable"}),"\n",(0,n.jsx)(s.h2,{id:"\u914D\u7F6E\u6570\u636E\u8FC7\u671F\u65F6\u95F4",children:"\u914D\u7F6E\u6570\u636E\u8FC7\u671F\u65F6\u95F4"}),"\n",(0,n.jsxs)(s.p,{children:["Chaos Dashboard \u652F\u6301\u914D\u7F6E\u6570\u636E\u7684\u8FC7\u671F\u65F6\u95F4\uFF0C\u9ED8\u8BA4 ",(0,n.jsx)(s.code,{children:"Event"})," \u76F8\u5173\u6570\u636E\u9ED8\u8BA4 ",(0,n.jsx)(s.code,{children:"168h"})," \u8FC7\u671F\uFF0C",(0,n.jsx)(s.code,{children:"Experiment"})," \u76F8\u5173\u6570\u636E\u9ED8\u8BA4 ",(0,n.jsx)(s.code,{children:"336h"})," \u8FC7\u671F\uFF0C\u5982\u9700\u8981\u4FEE\u6539\uFF0C\u53EF\u4EE5\u8BBE\u7F6E ",(0,n.jsx)(s.code,{children:"dashboard.env.TTL_EVENT"})," \u548C ",(0,n.jsx)(s.code,{children:"dashboard.env.TTL_EXPERIMENT"})," \u53C2\u6570\uFF0C\u5982\uFF1A"]}),"\n",(0,n.jsx)(o.A,{children:"helm install chaos-mesh chaos-mesh/chaos-mesh -n=chaos-mesh --version latest --set dashboard.env.TTL_EVENT=168h --set dashboard.env.TTL_EXPERIMENT=336h"})]})}function u(e={}){let{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},20134:function(e,s,a){a.d(s,{A:()=>c});var t=a(23420),n=a(88516),r=a(43480),o=a(69786),d=a(47791),h=a(38571),i=a.n(h),l=a(92674);let c=({children:e,className:s="language-bash"})=>{let{siteConfig:a}=(0,r.A)(),{versions:h}=(0,o.P_)("docusaurus-plugin-content-docs");return(0,t.jsx)(n.A,{children:()=>{let n=(0,l.t)(a,h),r="latest"===n?"":`--version ${i().satisfies(n,">=2.0.3")?n:"v"+(parseFloat(n.slice(0,3))-.7).toFixed(1)+n.slice(3)}`;return(0,t.jsx)(d.A,{className:s,children:e.replace("--version latest",r).trim()})}})}},92674:function(e,s,a){a.d(s,{A:()=>i,t:()=>h});var t=a(23420),n=a(88516),r=a(43480),o=a(69786),d=a(47791);let h=(e,s)=>{let a=window.location.pathname,t=window.localStorage.getItem("docs-preferred-version-default");if(a===e.baseUrl&&t)return"current"===t?"latest":t;if(a.includes("/docs/next"))return"latest";let n=s.find(e=>e.isLast),r=s.find(e=>a.includes(e.name));return r?r.name:n.name},i=({children:e,replaced:s="latest",isArchive:a=!1,className:i="language-bash"})=>{let{siteConfig:l}=(0,r.A)(),{versions:c}=(0,o.P_)("docusaurus-plugin-content-docs");return(0,t.jsx)(n.A,{children:()=>{let n=h(l,c),r=a?e.replace(s,"latest"===n?"refs/heads/master":`refs/tags/v${n}`):"latest"===n?e:e.replace(s,"v"+n);return(0,t.jsx)(d.A,{className:i,children:r})}})}}}]);