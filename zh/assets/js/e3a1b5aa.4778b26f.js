"use strict";(self.webpackChunkchaos_mesh_website=self.webpackChunkchaos_mesh_website||[]).push([["9839"],{33578:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>c,default:()=>d,contentTitle:()=>r,assets:()=>h,toc:()=>t,metadata:()=>o});var o=JSON.parse('{"id":"add-new-chaos-experiment-type","title":"\u65B0\u589E\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B","description":"\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u5F00\u53D1\u4E00\u79CD\u65B0\u7684\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.7.2/add-new-chaos-experiment-type.md","sourceDirName":".","slug":"/add-new-chaos-experiment-type","permalink":"/zh/docs/add-new-chaos-experiment-type","draft":false,"unlisted":false,"editUrl":"https://github.com/chaos-mesh/website/edit/master/i18n/zh/docusaurus-plugin-content-docs/version-2.7.2/add-new-chaos-experiment-type.md","tags":[],"version":"2.7.2","frontMatter":{"title":"\u65B0\u589E\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B"},"sidebar":"docs","previous":{"title":"\u914D\u7F6E\u5F00\u53D1\u73AF\u5883","permalink":"/zh/docs/configure-development-environment"},"next":{"title":"\u62D3\u5C55 Chaos Daemon \u63A5\u53E3","permalink":"/zh/docs/extend-chaos-daemon-interface"}}'),l=s(52676),a=s(72110);let c={title:"\u65B0\u589E\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B"},r=void 0,h={},t=[{value:"\u7B2C 1 \u6B65\uFF1A\u5B9A\u4E49\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u7ED3\u6784\u7C7B\u578B",id:"\u7B2C-1-\u6B65\u5B9A\u4E49\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u7ED3\u6784\u7C7B\u578B",level:2},{value:"\u7B2C 2 \u6B65\uFF1A\u6CE8\u518C CRD",id:"\u7B2C-2-\u6B65\u6CE8\u518C-crd",level:2},{value:"\u7B2C 3 \u6B65\uFF1A\u6CE8\u518C\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u5904\u7406\u51FD\u6570",id:"\u7B2C-3-\u6B65\u6CE8\u518C\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u5904\u7406\u51FD\u6570",level:2},{value:"\u7B2C 4 \u6B65\uFF1A\u7F16\u8BD1 Docker \u955C\u50CF",id:"\u7B2C-4-\u6B65\u7F16\u8BD1-docker-\u955C\u50CF",level:2},{value:"\u7B2C 5 \u6B65\uFF1A\u8FD0\u884C\u6DF7\u6C8C\u5B9E\u9A8C",id:"\u7B2C-5-\u6B65\u8FD0\u884C\u6DF7\u6C8C\u5B9E\u9A8C",level:2},{value:"\u63A2\u7D22\u66F4\u591A",id:"\u63A2\u7D22\u66F4\u591A",level:2}];function i(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u5F00\u53D1\u4E00\u79CD\u65B0\u7684\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B\u3002"}),"\n",(0,l.jsx)(n.p,{children:'\u4EE5\u5F00\u53D1\u4E00\u79CD\u540D\u4E3A HelloWorldChaos \u7684\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B\u4E3A\u4F8B\uFF0C\u5B83\u7684\u529F\u80FD\u662F\u5411\u65E5\u5FD7\u4E2D\u8F93\u51FA\u4E00\u884C "Hello world!"\u3002\u4E3A\u4E86\u5B8C\u6210\u8FD9\u4E00\u76EE\u6807\uFF0C\u4F60\u9700\u8981\u5B8C\u6210\u4EE5\u4E0B\u6B65\u9AA4\uFF1A'}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7B2C 1 \u6B65\uFF1A\u5B9A\u4E49\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u7ED3\u6784\u7C7B\u578B"}),"\n",(0,l.jsx)(n.li,{children:"\u7B2C 2 \u6B65\uFF1A\u6CE8\u518C CRD"}),"\n",(0,l.jsx)(n.li,{children:"\u7B2C 3 \u6B65\uFF1A\u6CE8\u518C\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u5904\u7406\u51FD\u6570"}),"\n",(0,l.jsx)(n.li,{children:"\u7B2C 4 \u6B65\uFF1A\u7F16\u8BD1 Docker \u955C\u50CF"}),"\n",(0,l.jsx)(n.li,{children:"\u7B2C 5 \u6B65\uFF1A\u8FD0\u884C\u6DF7\u6C8C\u5B9E\u9A8C"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7B2C-1-\u6B65\u5B9A\u4E49\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u7ED3\u6784\u7C7B\u578B",children:"\u7B2C 1 \u6B65\uFF1A\u5B9A\u4E49\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u7ED3\u6784\u7C7B\u578B"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5728 API \u76EE\u5F55 ",(0,l.jsx)(n.code,{children:"api/v1alpha1"})," \u4E2D\u65B0\u5EFA\u4E00\u4E2A\u540D\u4E3A ",(0,l.jsx)(n.code,{children:"helloworldchaos_types.go"})," \u7684\u6587\u4EF6\uFF0C\u5199\u5165\u4EE5\u4E0B\u5185\u5BB9:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package v1alpha1\n\nimport (\n    metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"\n)\n\n// +kubebuilder:object:root=true\n// +chaos-mesh:experiment\n// +chaos-mesh:oneshot=true\n\n// HelloWorldChaos is the Schema for the helloworldchaos API\ntype HelloWorldChaos struct {\n    metav1.TypeMeta   `json:",inline"`\n    metav1.ObjectMeta `json:"metadata,omitempty"`\n\n    Spec   HelloWorldChaosSpec   `json:"spec"`\n    Status HelloWorldChaosStatus `json:"status,omitempty"`\n}\n\n// HelloWorldChaosSpec is the content of the specification for a HelloWorldChaos\ntype HelloWorldChaosSpec struct {\n    // ContainerSelector specifies target\n    ContainerSelector `json:",inline"`\n\n    // Duration represents the duration of the chaos action\n    // +optional\n    Duration *string `json:"duration,omitempty"`\n}\n\n// HelloWorldChaosStatus represents the status of a HelloWorldChaos\ntype HelloWorldChaosStatus struct {\n    ChaosStatus `json:",inline"`\n}\n\n// GetSelectorSpecs is a getter for selectors\nfunc (obj *HelloWorldChaos) GetSelectorSpecs() map[string]interface{} {\n    return map[string]interface{}{\n        ".": &obj.Spec.ContainerSelector,\n    }\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"\u8FD9\u4E2A\u6587\u4EF6\u5B9A\u4E49\u4E86 HelloWorldChaos \u7684\u7ED3\u6784\u7C7B\u578B\uFF0C\u5B83\u53EF\u4EE5\u7528\u4E00\u4E2A YAML \u6587\u4EF6\u63CF\u8FF0:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: chaos-mesh.org/v1alpha1\nkind: HelloWorldChaos\nmetadata:\n  name: <\u8D44\u6E90\u540D>\n  namespace: <\u547D\u540D\u7A7A\u95F4\u540D>\nspec:\n  duration: <\u6301\u7EED\u65F6\u95F4>\nstatus:\n  experiment: <\u5B9E\u9A8C\u72B6\u6001>\n  ...\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5728 Chaos Mesh \u6839\u76EE\u5F55\u4E0B\u8FD0\u884C ",(0,l.jsx)(n.code,{children:"make generate"}),"\uFF0C\u4E3A HelloWorldChaos \u751F\u6210\u4E00\u4E9B\u7528\u4E8E\u7F16\u8BD1 Chaos Mesh \u7684\u8F85\u52A9\u4EE3\u7801\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7B2C-2-\u6B65\u6CE8\u518C-crd",children:"\u7B2C 2 \u6B65\uFF1A\u6CE8\u518C CRD"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 Kubernetes API \u4E2D\u6CE8\u518C HelloWorldChaos \u7684 CRD\uFF0C\u4F7F HelloWorldChaos \u6210\u4E3A\u4E00\u79CD Kubernetes \u81EA\u5B9A\u4E49\u8D44\u6E90\u3002"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5728\u6839\u76EE\u5F55\u4E0B\u8FD0\u884C ",(0,l.jsx)(n.code,{children:"make yaml"}),"\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u751F\u6210\u7684 YAML \u6587\u4EF6\u4F4D\u4E8E ",(0,l.jsx)(n.code,{children:"config/crd/bases/chaos-mesh.org_helloworldchaos.yaml"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4E3A\u5C06\u8FD9\u4E2A YAML \u6587\u4EF6\u5408\u5E76\u5165 ",(0,l.jsx)(n.code,{children:"manifests/crd.yaml"})," \u4E2D\uFF0C\u4FEE\u6539 ",(0,l.jsx)(n.code,{children:"config/crd/kustomization.yaml"}),"\uFF0C\u5728\u5176\u4E2D\u52A0\u5165\u65B0\u7684\u4E00\u884C:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - bases/chaos-mesh.org_podchaos.yaml\n  - bases/chaos-mesh.org_networkchaos.yaml\n  - bases/chaos-mesh.org_iochaos.yaml\n  - bases/chaos-mesh.org_helloworldchaos.yaml # \u65B0\u589E\u4E00\u884C\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u518D\u6B21\u8FD0\u884C ",(0,l.jsx)(n.code,{children:"make yaml"}),"\uFF0CHelloWorldChaos \u7684\u5B9A\u4E49\u5C31\u4F1A\u51FA\u73B0\u5728 ",(0,l.jsx)(n.code,{children:"manifests/crd.yaml"})," \u91CC\u3002 \u5982\u9700\u786E\u8BA4\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"git diff"})," \u547D\u4EE4\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7B2C-3-\u6B65\u6CE8\u518C\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u5904\u7406\u51FD\u6570",children:"\u7B2C 3 \u6B65\uFF1A\u6CE8\u518C\u6DF7\u6C8C\u5B9E\u9A8C\u7684\u5904\u7406\u51FD\u6570"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u521B\u5EFA\u4E00\u4E2A\u65B0\u6587\u4EF6 ",(0,l.jsx)(n.code,{children:"controllers/chaosimpl/helloworldchaos/types.go"})," \u5E76\u5199\u5165\u5982\u4E0B\u5185\u5BB9\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package helloworldchaos\n\nimport (\n    "context"\n\n    "github.com/go-logr/logr"\n    "go.uber.org/fx"\n    "sigs.k8s.io/controller-runtime/pkg/client"\n\n    "github.com/chaos-mesh/chaos-mesh/api/v1alpha1"\n    impltypes "github.com/chaos-mesh/chaos-mesh/controllers/chaosimpl/types"\n    "github.com/chaos-mesh/chaos-mesh/controllers/chaosimpl/utils"\n)\n\ntype Impl struct {\n    client.Client\n    Log     logr.Logger\n    decoder *utils.ContainerRecordDecoder\n}\n\n// This corresponds to the Apply phase of HelloWorldChaos. The execution of HelloWorldChaos will be triggered.\nfunc (impl *Impl) Apply(ctx context.Context, index int, records []*v1alpha1.Record, obj v1alpha1.InnerObject) (v1alpha1.Phase, error) {\n    impl.Log.Info("Hello world!")\n    return v1alpha1.Injected, nil\n}\n\n// This corresponds to the Recover phase of HelloWorldChaos. The reconciler will be triggered to recover the chaos action.\nfunc (impl *Impl) Recover(ctx context.Context, index int, records []*v1alpha1.Record, obj v1alpha1.InnerObject) (v1alpha1.Phase, error) {\n    impl.Log.Info("Goodbye world!")\n    return v1alpha1.NotInjected, nil\n}\n\nfunc NewImpl(c client.Client, log logr.Logger, decoder *utils.ContainerRecordDecoder) *impltypes.ChaosImplPair {\n    return &impltypes.ChaosImplPair{\n        Name:   "helloworldchaos",\n        Object: &v1alpha1.HelloWorldChaos{},\n        Impl: &Impl{\n            Client:  c,\n            Log:     log.WithName("helloworldchaos"),\n            decoder: decoder,\n        },\n        ObjectList: &v1alpha1.HelloWorldChaosList{},\n    }\n}\n\nvar Module = fx.Provide(\n    fx.Annotated{\n        Group:  "impl",\n        Target: NewImpl,\n    },\n)\n\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Chaos Mesh \u4F7F\u7528 ",(0,l.jsx)(n.a,{href:"https://github.com/uber-go/fx",children:"fx"})," \u8FD9\u4E2A\u5E93\u6765\u8FDB\u884C\u4F9D\u8D56\u6CE8\u5165\u3002\u4E3A\u4E86\u6CE8\u518C\u8FDB Controller Manager\uFF0C\u9700\u8981\u5728 ",(0,l.jsx)(n.code,{children:"controllers/chaosimpl/fx.go"})," \u4E2D\u52A0\u5165\u4E00\u884C\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"    ...\n    gcpchaos.Module,\n    stresschaos.Module,\n    jvmchaos.Module,\n    timechaos.Module,\n    helloworldchaos.Module // \u65B0\u589E\u4E00\u884C\uFF0C\u6CE8\u610F\u5904\u7406 import\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u4EE5\u53CA\u5728 ",(0,l.jsx)(n.code,{children:"controllers/types/types.go"})," \u4E2D\u52A0\u5165\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'    ...\n    fx.Annotated{\n        Group: "objs",\n        Target: Object{\n            Name:   "timechaos",\n            Object: &v1alpha1.TimeChaos{},\n        },\n    },\n\n    fx.Annotated{\n        Group: "objs",\n        Target: Object{\n            Name:   "gcpchaos",\n            Object: &v1alpha1.GCPChaos{},\n        },\n    },\n\n    fx.Annotated{\n        Group: "objs",\n        Target: Object{\n            Name:   "helloworldchaos",\n            Object: &v1alpha1.HelloWorldChaos{},\n        },\n    },\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7B2C-4-\u6B65\u7F16\u8BD1-docker-\u955C\u50CF",children:"\u7B2C 4 \u6B65\uFF1A\u7F16\u8BD1 Docker \u955C\u50CF"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5728\u5B8C\u6210\u4E86\u524D\u9762\u6240\u6709\u6B65\u9AA4\u540E\uFF0C\u4F60\u53EF\u4EE5\u5C1D\u8BD5\u7F16\u8BD1\u955C\u50CF\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"make\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5C06\u955C\u50CF\u63A8\u9001\u5230\u672C\u5730\u7684 Docker Registry \u4E2D\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"make docker-push\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5982\u679C\u4F60\u7684 Kubernetes \u96C6\u7FA4\u90E8\u7F72\u5728 kind \u4E0A\uFF0C\u5219\u8FD8\u9700\u8981\u5C06\u955C\u50CF\u52A0\u8F7D\u8FDB kind \u4E2D\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kind load docker-image localhost:5000/chaos-mesh/chaos-mesh:latest\nkind load docker-image localhost:5000/chaos-mesh/chaos-daemon:latest\nkind load docker-image localhost:5000/chaos-mesh/chaos-dashboard:latest\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7B2C-5-\u6B65\u8FD0\u884C\u6DF7\u6C8C\u5B9E\u9A8C",children:"\u7B2C 5 \u6B65\uFF1A\u8FD0\u884C\u6DF7\u6C8C\u5B9E\u9A8C"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u8FD9\u4E00\u6B65\u4E2D\uFF0C\u4F60\u9700\u8981\u90E8\u7F72\u4FEE\u6539\u7248\u7684 Chaos Mesh \u5E76\u6D4B\u8BD5 HelloWorldChaos\u3002"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5C06 CRD \u6CE8\u518C\u8FDB\u96C6\u7FA4\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl create -f manifests/crd.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u53EF\u4EE5\u770B\u5230 HelloWorldChaos \u5DF2\u7ECF\u88AB\u521B\u5EFA\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-log",children:"customresourcedefinition.apiextensions.k8s.io/helloworldchaos.chaos-mesh.org created\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u73B0\u5728\u53EF\u4EE5\u67E5\u770B HelloWorldChaos \u7684 CRD\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get crd helloworldchaos.chaos-mesh.org\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5B89\u88C5 Chaos Mesh\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm install chaos-mesh helm/chaos-mesh --namespace=chaos-mesh --set chaosDaemon.runtime=containerd --set chaosDaemon.socketPath=/run/containerd/containerd.sock --set images.registry=localhost:5000 --version latest\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u9A8C\u8BC1\u4E00\u4E0B\u5B89\u88C5\u662F\u5426\u6210\u529F\uFF0C\u67E5\u8BE2 ",(0,l.jsx)(n.code,{children:"chaos-mesh"})," \u547D\u540D\u7A7A\u95F4\u7684 Pod:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get pods --namespace chaos-mesh -l app.kubernetes.io/instance=chaos-mesh\n"})}),"\n",(0,l.jsx)(n.admonition,{title:"\u6CE8\u610F",type:"note",children:(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"--set chaosDaemon.runtime=containerd --set chaosDaemon.socketPath=/run/containerd/containerd.sock"})," \u662F\u7528\u6765\u5728 kind \u4E0A\u8FD0\u884C NetworkChaos \u7684\u3002"]})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u90E8\u7F72\u7528\u4E8E\u6D4B\u8BD5\u7684\u76EE\u6807 Pod\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f https://raw.githubusercontent.com/chaos-mesh/apps/master/ping/busybox-statefulset.yaml\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8BF7\u786E\u4FDD\u7528\u4E8E\u6D4B\u8BD5\u7684\u76EE\u6807 Pod \u53EF\u4EE5\u6B63\u5E38\u8FD0\u884C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A ",(0,l.jsx)(n.code,{children:"chaos.yaml"})," \u7684\u6587\u4EF6\uFF0C\u5199\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: chaos-mesh.org/v1alpha1\nkind: HelloWorldChaos\nmetadata:\n  name: hello-world\n  namespace: chaos-mesh\nspec:\n  selector:\n    namespaces:\n      - busybox\n  mode: one\n  duration: 1h\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u8FD0\u884C\u6DF7\u6C8C\u5B9E\u9A8C\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f /path/to/chaos.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get HelloWorldChaos -n chaos-mesh\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u73B0\u5728\u67E5\u770B ",(0,l.jsx)(n.code,{children:"chaos-controller-manager"})," \u7684\u65E5\u5FD7\uFF0C\u5C31\u4F1A\u770B\u5230 ",(0,l.jsx)(n.code,{children:"Hello World!"}),"\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs chaos-controller-manager-{pod-post-fix} -n chaos-mesh\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u663E\u793A\u65E5\u5FD7\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-log",children:'2021-06-24T06:42:26.858Z        INFO    records apply chaos     {"id": "chaos-mesh/chaos-daemon-vsmc5"}\n2021-06-24T06:42:26.858Z        INFO    helloworldchaos Hello World!\n'})}),"\n",(0,l.jsx)(n.admonition,{title:"\u6CE8\u610F",type:"note",children:(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"{pod-post-fix}"})," \u662F\u4E00\u4E2A\u968F\u673A\u4E32\u3002\u4F60\u53EF\u4EE5\u8FD0\u884C ",(0,l.jsx)(n.code,{children:"kubectl get pod -n chaos-mesh"})," \u6765\u67E5\u770B\u5B83\u3002"]})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u63A2\u7D22\u66F4\u591A",children:"\u63A2\u7D22\u66F4\u591A"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u4F60\u5728\u65B0\u589E\u6DF7\u6C8C\u5B9E\u9A8C\u7C7B\u578B\u7684\u8FC7\u7A0B\u4E2D\u9047\u5230\u4E86\u95EE\u9898\uFF0C\u8BF7\u5728 GitHub \u521B\u5EFA\u4E00\u4E2A ",(0,l.jsx)(n.a,{href:"https://github.com/chaos-mesh/chaos-mesh/issues",children:"issue"})," \u5411 Chaos Mesh \u56E2\u961F\u53CD\u9988\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u4F60\u60F3\u8FDB\u4E00\u6B65\u5C1D\u8BD5\u5F00\u53D1\u5DE5\u4F5C\uFF0C\u8BF7\u53C2\u9605 ",(0,l.jsx)(n.a,{href:"/zh/docs/extend-chaos-daemon-interface",children:"\u62D3\u5C55 Chaos Daemon \u63A5\u53E3"}),"\u3002"]})]})}function d(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(i,{...e})}):i(e)}},72110:function(e,n,s){s.d(n,{Z:()=>r,a:()=>c});var o=s(75271);let l={},a=o.createContext(l);function c(e){let n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);