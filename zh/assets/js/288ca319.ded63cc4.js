"use strict";(self.webpackChunkchaos_mesh_website=self.webpackChunkchaos_mesh_website||[]).push([["8510"],{35134:function(e,n,a){a.r(n),a.d(n,{frontMatter:()=>r,default:()=>h,toc:()=>o,metadata:()=>s,assets:()=>t,contentTitle:()=>l});var s=JSON.parse('{"id":"use-grafana-data-source","title":"\u4F7F\u7528 Grafana Data Source \u63D2\u4EF6\u8FDB\u884C\u89C2\u6D4B","description":"\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u5728\u672C\u5730 Grafana \u5B89\u88C5 Data Source \u63D2\u4EF6\uFF0C\u5E76\u4F7F\u7528 Grafana Data Source \u8FDB\u884C\u89C2\u6D4B\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.7.2/use-grafana-data-source.md","sourceDirName":".","slug":"/use-grafana-data-source","permalink":"/zh/docs/use-grafana-data-source","draft":false,"unlisted":false,"editUrl":"https://github.com/chaos-mesh/website/edit/master/i18n/zh/docusaurus-plugin-content-docs/version-2.7.2/use-grafana-data-source.md","tags":[],"version":"2.7.2","frontMatter":{"title":"\u4F7F\u7528 Grafana Data Source \u63D2\u4EF6\u8FDB\u884C\u89C2\u6D4B"},"sidebar":"docs","previous":{"title":"\u96C6\u6210 Chaos Mesh \u5230 GitHub Actions","permalink":"/zh/docs/integrate-chaos-mesh-into-github-actions"},"next":{"title":"Chaosctl","permalink":"/zh/docs/chaosctl-tool"}}'),i=a(74132),c=a(25998);let r={title:"\u4F7F\u7528 Grafana Data Source \u63D2\u4EF6\u8FDB\u884C\u89C2\u6D4B"},l=void 0,t={},o=[{value:"\u4F7F\u7528 grafana-cli \u5B89\u88C5 Data Source \u63D2\u4EF6",id:"\u4F7F\u7528-grafana-cli-\u5B89\u88C5-data-source-\u63D2\u4EF6",level:2},{value:"\u624B\u52A8\u5B89\u88C5 Data Source \u63D2\u4EF6",id:"\u624B\u52A8\u5B89\u88C5-data-source-\u63D2\u4EF6",level:2},{value:"\u8BBE\u7F6E Data Source \u63D2\u4EF6",id:"\u8BBE\u7F6E-data-source-\u63D2\u4EF6",level:2},{value:"Query",id:"query",level:2},{value:"Annotations",id:"annotations",level:2},{value:"Variables",id:"variables",level:2},{value:"\u95EE\u9898\u53CD\u9988",id:"\u95EE\u9898\u53CD\u9988",level:2},{value:"\u63A2\u7D22\u66F4\u591A",id:"\u63A2\u7D22\u66F4\u591A",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u5728\u672C\u5730 Grafana \u5B89\u88C5 Data Source \u63D2\u4EF6\uFF0C\u5E76\u4F7F\u7528 Grafana Data Source \u8FDB\u884C\u89C2\u6D4B\u3002"}),"\n",(0,i.jsx)(n.admonition,{title:"\u6CE8\u610F",type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Grafana \u5E94\u4E3A v7.0.0 \u6216\u66F4\u9AD8\u7248\u672C\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Chaos Mesh \u5E94\u4E3A v2.1.0 \u6216\u66F4\u9AD8\u7248\u672C\u3002"}),"\n"]})}),"\n",(0,i.jsx)(n.h2,{id:"\u4F7F\u7528-grafana-cli-\u5B89\u88C5-data-source-\u63D2\u4EF6",children:"\u4F7F\u7528 grafana-cli \u5B89\u88C5 Data Source \u63D2\u4EF6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"grafana-cli plugins install chaosmeshorg-datasource\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u624B\u52A8\u5B89\u88C5-data-source-\u63D2\u4EF6",children:"\u624B\u52A8\u5B89\u88C5 Data Source \u63D2\u4EF6"}),"\n",(0,i.jsx)(n.p,{children:"\u4F5C\u4E3A\u5907\u9009\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u6B65\u9AA4\u5728\u672C\u5730 Grafana \u5B89\u88C5 Data Source \u63D2\u4EF6\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u901A\u8FC7\u5982\u4E0B\u547D\u4EE4\u4E0B\u8F7D\u63D2\u4EF6 zip \u5305\uFF0C\u6216\u524D\u5F80 ",(0,i.jsx)(n.a,{href:"https://github.com/chaos-mesh/datasource/releases",children:"https://github.com/chaos-mesh/datasource/releases"})," \u4E0B\u8F7D\u8BE5\u538B\u7F29\u5305\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"curl -LO https://github.com/chaos-mesh/datasource/releases/download/v2.2.3/chaosmeshorg-datasource-2.2.3.zip\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4E0B\u8F7D\u5B8C\u6210\u540E\uFF0C\u5C06\u63D2\u4EF6\u89E3\u538B\u81F3 Grafana \u63D2\u4EF6\u76EE\u5F55\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"unzip chaosmeshorg-datasource-2.2.3.zip -d YOUR_PLUGIN_DIR\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"\u5C0F\u8D34\u58EB",type:"tip",children:(0,i.jsxs)(n.p,{children:["\u5982\u9700\u67E5\u627E\u63D2\u4EF6\u76EE\u5F55\uFF0C\u53EF\u53C2\u8003 ",(0,i.jsx)(n.a,{href:"https://grafana.com/docs/grafana/latest/plugins/installation/#install-a-packaged-plugin%E3%80%82",children:"https://grafana.com/docs/grafana/latest/plugins/installation/#install-a-packaged-plugin\u3002"})]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u7136\u540E\u66F4\u65B0\u5E76\u4FDD\u5B58 Grafana \u7684\u914D\u7F6E\u6587\u4EF6 ",(0,i.jsx)(n.code,{children:"grafana.ini"}),"\uFF0C\u5C06\u63D2\u4EF6\u6DFB\u52A0\u81F3 ",(0,i.jsx)(n.code,{children:"allow_loading_unsigned_plugins"})," \u4EE5\u4FDD\u8BC1 Grafana \u53EF\u4EE5\u52A0\u8F7D\u672A\u7B7E\u540D\u7684\u63D2\u4EF6\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"[plugins]\n  allow_loading_unsigned_plugins = chaosmeshorg-datasource\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"\u5C0F\u8D34\u58EB",type:"tip",children:(0,i.jsxs)(n.p,{children:["\u5982\u9700\u67E5\u627E\u914D\u7F6E\u6587\u4EF6\uFF0C\u53EF\u53C2\u8003 ",(0,i.jsx)(n.a,{href:"https://grafana.com/docs/grafana/latest/administration/configuration/#config-file-locations%E3%80%82",children:"https://grafana.com/docs/grafana/latest/administration/configuration/#config-file-locations\u3002"})]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5B8C\u6210\u4FEE\u6539\u540E\uFF0C\u91CD\u542F Grafana \u5373\u53EF\u52A0\u8F7D Data Source \u63D2\u4EF6\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u8BBE\u7F6E-data-source-\u63D2\u4EF6",children:"\u8BBE\u7F6E Data Source \u63D2\u4EF6"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6210\u529F\u5728\u672C\u5730 Grafana \u5B89\u88C5 Data Source \u63D2\u4EF6\u540E\uFF0C\u524D\u5F80 ",(0,i.jsx)(n.strong,{children:"Configuration -> Data sources"}),"\uFF0C\u5728\u6B64\u5904\u6DFB\u52A0 Chaos Mesh \u540E\uFF0C\u8FDB\u5165\u5982\u4E0B\u914D\u7F6E\u9875\u9762\uFF1A"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"\u914D\u7F6E\u9875\u9762",src:a(24586).Z+"",width:"1400",height:"1330"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u672C\u9875\u9762\u4E2D\uFF0C\u53EA\u6709 ",(0,i.jsx)(n.code,{children:"URL"})," \u5B57\u6BB5\u9700\u8981\u586B\u5199\uFF0C\u5176\u4ED6\u5B57\u6BB5\u53EF\u4EE5\u5FFD\u7565\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5047\u8BBE\u4F60\u5DF2\u7ECF\u5728\u672C\u5730\u5B89\u88C5\u4E86 Chaos Mesh\uFF0CDashboard \u4F1A\u9ED8\u8BA4\u5728 ",(0,i.jsx)(n.code,{children:"2333"})," \u7AEF\u53E3\u5BFC\u51FA API\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u4F60\u6CA1\u6709\u4FEE\u6539\u4EFB\u4F55\u4E1C\u897F\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728 ",(0,i.jsx)(n.code,{children:"URL"})," \u4E2D\u586B\u5199 ",(0,i.jsx)(n.code,{children:"http://localhost:2333"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u7136\u540E\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"port-forward"})," \u547D\u4EE4\u8BA9 API \u53EF\u88AB\u5916\u90E8\u8BBF\u95EE:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"kubectl port-forward -n chaos-mesh svc/chaos-dashboard 2333:2333\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u70B9\u51FB ",(0,i.jsx)(n.strong,{children:"Save & Test"})," \u6765\u6D4B\u8BD5\u8FDE\u63A5\u3002\u5982\u679C\u663E\u793A\u6210\u529F\u7684\u901A\u77E5\uFF0C\u5219\u8BF4\u660E\u8BBE\u7F6E\u5DF2\u7ECF\u5B8C\u6210\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"query",children:"Query"}),"\n",(0,i.jsx)(n.p,{children:"Data Source \u63D2\u4EF6\u4F1A\u4EE5\u4E8B\u4EF6\u7684\u89C6\u89D2\u6765\u89C2\u6D4B Chaos Mesh\uFF0C\u4EE5\u4E0B\u51E0\u4E2A\u9009\u9879\u8D1F\u8D23\u8FC7\u6EE4\u4E0D\u540C\u7684\u4E8B\u4EF6\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Object ID"}),": \u901A\u8FC7\u5BF9\u8C61\u7684 UUID \u8FDB\u884C\u8FC7\u6EE4"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Namespace"}),": \u901A\u8FC7\u4E0D\u540C\u7684\u547D\u540D\u7A7A\u95F4\u8FDB\u884C\u8FC7\u6EE4"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Name"}),": \u901A\u8FC7\u5BF9\u8C61\u540D\u8FDB\u884C\u8FC7\u6EE4"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Kind"}),": \u901A\u8FC7\u7C7B\u578B\uFF08PodChaos, Schedule \u7B49\uFF09\u8FDB\u884C\u8FC7\u6EE4"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Limit"}),": \u9650\u5236\u4E8B\u4EF6\u7684\u6570\u91CF"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5BF9\u8FD9\u4E9B\u9009\u9879\u7684\u8BBE\u7F6E\u4F1A\u4F5C\u4E3A\u53C2\u6570\u88AB\u4F20\u9012\u5230 ",(0,i.jsx)(n.code,{children:"/api/events"})," API \u4E2D\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"annotations",children:"Annotations"}),"\n",(0,i.jsx)(n.p,{children:"\u4F60\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E Annotations \u628A Chaos Mesh \u7684\u4E8B\u4EF6\u96C6\u6210\u5230\u9762\u677F\u4E0A\uFF0C\u5177\u4F53\u521B\u5EFA\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Annotations",src:a(79606).Z+"",width:"1280",height:"1300"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u9700\u4E86\u89E3\u5982\u4F55\u586B\u5199 Annotations \u4E2D\u7684\u5B57\u6BB5\uFF0C\u8BF7\u53C2\u8003 ",(0,i.jsx)(n.a,{href:"#query",children:"Query"}),"\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"variables",children:"Variables"}),"\n",(0,i.jsx)(n.p,{children:"\u4F60\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u4E0D\u540C\u7684\u53D8\u91CF\u6765\u52A8\u6001\u5730\u67E5\u8BE2 Chaos Mesh \u7684\u4E8B\u4EF6\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Variables",src:a(95691).Z+"",width:"1860",height:"1280"})}),"\n",(0,i.jsx)(n.p,{children:"\u4EE5\u4E0B\u662F\u63D2\u4EF6\u63D0\u4F9B\u7684\u53D8\u91CF\u7C7B\u578B\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Namespace"}),": \u9009\u62E9\u540E\uFF0C\u6240\u6709\u53EF\u7528\u7684\u547D\u540D\u7A7A\u95F4\u5C06\u76F4\u63A5\u663E\u793A\u5728\u9875\u9762\u4E0B\u65B9\u7684 ",(0,i.jsx)(n.code,{children:"Preview of values"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Kind"}),": \u4E0E\u547D\u540D\u7A7A\u95F4\u76F8\u540C\u3002\u83B7\u53D6\u6240\u6709\u79CD\u7C7B\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Experiment"}),": \u4E0E\u547D\u540D\u7A7A\u95F4\u76F8\u540C\u3002\u83B7\u53D6\u6240\u6709\u5B9E\u9A8C\u7684\u540D\u79F0\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Schedule"}),": \u4E0E\u547D\u540D\u7A7A\u95F4\u76F8\u540C\u3002\u83B7\u53D6\u6240\u6709\u65F6\u95F4\u8868\u7684\u540D\u79F0\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u95EE\u9898\u53CD\u9988",children:"\u95EE\u9898\u53CD\u9988"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679C\u5728\u5B89\u88C5\u6216\u8BBE\u7F6E\u7684\u8FC7\u7A0B\u4E2D\u9047\u5230\u4E86\u95EE\u9898\uFF0C\u6B22\u8FCE\u5728 ",(0,i.jsx)(n.a,{href:"https://cloud-native.slack.com/archives/C0193VAV272",children:"CNCF Slack"})," \u5411\u793E\u533A\u63D0\u95EE\uFF0C\u6216\u8005\u76F4\u63A5\u5728 GitHub \u521B\u5EFA\u4E00\u4E2A ",(0,i.jsx)(n.a,{href:"https://github.com/chaos-mesh/datasource/issues",children:"issue"})," \u5411 Chaos Mesh \u56E2\u961F\u53CD\u9988\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u63A2\u7D22\u66F4\u591A",children:"\u63A2\u7D22\u66F4\u591A"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679C\u4F60\u60F3\u4E86\u89E3\u66F4\u591A\u5185\u5BB9\uFF0C \u6B22\u8FCE\u5728 ",(0,i.jsx)(n.a,{href:"https://github.com/chaos-mesh/datasource",children:"chaos-mesh/datasource"})," \u67E5\u770B\u63D2\u4EF6\u7684\u6E90\u4EE3\u7801\u3002"]})]})}function h(e={}){let{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},79606:function(e,n,a){a.d(n,{Z:()=>s});let s=a.p+"assets/images/annotations-b9e5e1fd76f38a49dd9886922307fc69.png"},24586:function(e,n,a){a.d(n,{Z:()=>s});let s=a.p+"assets/images/settings-665c0b7d82f112c4cfc6e7555ff5fecb.png"},95691:function(e,n,a){a.d(n,{Z:()=>s});let s=a.p+"assets/images/variables-a7c176c8c7d5421dc93e921d29d697a5.png"},25998:function(e,n,a){a.d(n,{Z:()=>l,a:()=>r});var s=a(39546);let i={},c=s.createContext(i);function r(e){let n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);