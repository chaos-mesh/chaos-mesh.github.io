<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.5.2 docs-doc-page docs-doc-id-simulate-http-chaos-on-kubernetes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Simulate HTTP Faults | Chaos Mesh</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://chaos-mesh.org/img/chaos-mesh-social-preview.png"><meta data-rh="true" name="twitter:image" content="https://chaos-mesh.org/img/chaos-mesh-social-preview.png"><meta data-rh="true" property="og:url" content="https://chaos-mesh.org/docs/2.5.2/simulate-http-chaos-on-kubernetes/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.5.2"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.5.2"><meta data-rh="true" name="docsearch:version" content="2.5.2"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.5.2"><meta data-rh="true" property="og:title" content="Simulate HTTP Faults | Chaos Mesh"><meta data-rh="true" name="description" content="This document describes how to simulate HTTP faults by creating HTTPChaos experiments in Chaos Mesh."><meta data-rh="true" property="og:description" content="This document describes how to simulate HTTP faults by creating HTTPChaos experiments in Chaos Mesh."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://chaos-mesh.org/docs/2.5.2/simulate-http-chaos-on-kubernetes/"><link data-rh="true" rel="alternate" href="https://chaos-mesh.org/docs/2.5.2/simulate-http-chaos-on-kubernetes/" hreflang="en"><link data-rh="true" rel="alternate" href="https://chaos-mesh.org/zh/docs/2.5.2/simulate-http-chaos-on-kubernetes/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://chaos-mesh.org/docs/2.5.2/simulate-http-chaos-on-kubernetes/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3BY0S3HQX6-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Chaos Mesh RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Chaos Mesh Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T31S4LR9LL"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-T31S4LR9LL",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Chaos Mesh" href="/opensearch.xml">

<link rel="preconnect" href="https://www.clarity.ms">
<script>!function(t,e,n,c,r,s,a){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(s=e.createElement(c)).async=1,s.src="https://www.clarity.ms/tag/lggqck9srz",(a=e.getElementsByTagName(c)[0]).parentNode.insertBefore(s,a)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/assets/css/styles.e63dd260.css">
<script src="/assets/js/runtime~main.95338b80.js" defer="defer"></script>
<script src="/assets/js/main.ff1822d1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_VprB" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_gm8K"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logos/logo-mini.svg" alt="Chaos Mesh" class="themedComponent_wXoC themedComponent--light_HvHy"><img src="/img/logos/logo-mini-white.svg" alt="Chaos Mesh" class="themedComponent_wXoC themedComponent--dark_JLbL"></div><b class="navbar__title text--truncate">Chaos Mesh</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://community.cncf.io/chaos-mesh-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WtTX"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/2.5.2/simulate-http-chaos-on-kubernetes/">2.5.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/simulate-http-chaos-on-kubernetes/">Next</a></li><li><a class="dropdown__link" href="/docs/simulate-http-chaos-on-kubernetes/">2.7.0</a></li><li><a class="dropdown__link" href="/docs/2.6.5/simulate-http-chaos-on-kubernetes/">2.6.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.5.2/simulate-http-chaos-on-kubernetes/">2.5.2</a></li><li class=""><hr style="margin: .5em 0;"></li><li><a class="dropdown__link" href="/versions/">All Versions</a></li><li><a class="dropdown__link" href="/supported-releases/">Supported Releases</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_xvpk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/2.5.2/simulate-http-chaos-on-kubernetes/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/2.5.2/simulate-http-chaos-on-kubernetes/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="toggle_JMiF colorModeToggle_VyTq"><button class="clean-btn toggleButton_R5El toggleButtonDisabled_ni1X" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_UtZQ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_hr4M"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_lWAT"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_ZIuv"><div class="docsWrapper__Ysd"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_af9j" type="button"></button><div class="docRoot_Y4IZ"><aside class="theme-doc-sidebar-container docSidebarContainer_LD1y"><div class="sidebarViewport_y601"><div class="sidebar_b7Lr sidebarWithHideableNavbar_jamL"><a tabindex="-1" class="sidebarLogo_rJBl" href="/"><img src="/img/logos/logo-mini.svg" alt="Chaos Mesh" class="themedComponent_wXoC themedComponent--light_HvHy"><img src="/img/logos/logo-mini-white.svg" alt="Chaos Mesh" class="themedComponent_wXoC themedComponent--dark_JLbL"><b>Chaos Mesh</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_fERv"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.5.2/">About Chaos Mesh</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/2.5.2/quick-start/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/2.5.2/quick-start/">Installation and Deployment</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/quick-start/">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/production-installation-using-helm/">Install Chaos Mesh using Helm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/offline-installation/">Install Chaos Mesh Offline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/persistence-dashboard/">Persistence Chaos Dashboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/uninstallation/">Uninstall Chaos Mesh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/supported-releases/">Supported Releases</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/manage-user-permissions/">Manage User Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/configure-enabled-namespace/">Configure namespace for Chaos experiments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/remote-cluster-management/">Remote Cluster Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.5.2/define-chaos-experiment-scope/">Run a Single Chaos Experiment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.5.2/create-chaos-mesh-workflow/">Orchestrate Multiple Chaos Experiments</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/2.5.2/simulate-pod-chaos-on-kubernetes/">Types of Chaos Experiments</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/2.5.2/simulate-pod-chaos-on-kubernetes/">Kubernetes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-pod-chaos-on-kubernetes/">Simulate Pod Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-network-chaos-on-kubernetes/">Simulate Network Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-heavy-stress-on-kubernetes/">Simulate Stress Scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-io-chaos-on-kubernetes/">Simulate File I/O Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-dns-chaos-on-kubernetes/">Simulate DNS Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-time-chaos-on-kubernetes/">Simulate Time Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-jvm-application-chaos/">Simulate JVM Application Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-kernel-chaos-on-kubernetes/">Simulate Linux Kernel Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-aws-chaos/">Simulate AWS Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-azure-chaos/">Simulate Azure Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-gcp-chaos/">Simulate GCP Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.5.2/simulate-http-chaos-on-kubernetes/">Simulate HTTP Faults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.5.2/simulate-block-chaos-on-kubernetes/">Simulate Block Device Latency</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.5.2/chaosd-overview/">Physical Nodes</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.5.2/gcp-authentication/">Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.5.2/integrate-chaos-mesh-into-github-actions/">Tools Integration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.5.2/developer-guide-overview/">Development Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.5.2/faqs/">FAQs and Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.5.2/release-cycle/">Release</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_aN2T"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_kaqy"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Chaos Mesh<!-- --> <b>2.5.2</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/simulate-http-chaos-on-kubernetes/">latest version</a></b> (<!-- -->2.7.0<!-- -->).</div></div><div class="docItemContainer_Yi4o"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_WX_J" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_ZXnr"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Types of Chaos Experiments</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Kubernetes</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Simulate HTTP Faults</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.5.2</span><div class="tocCollapsible_YCEN theme-doc-toc-mobile tocMobile_Cav4"><button type="button" class="clean-btn tocCollapsibleButton_HCDK">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Simulate HTTP Faults</h1></header><p>This document describes how to simulate HTTP faults by creating HTTPChaos experiments in Chaos Mesh.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="httpchaos-introduction">HTTPChaos introduction<a href="#httpchaos-introduction" class="hash-link" aria-label="Direct link to HTTPChaos introduction" title="Direct link to HTTPChaos introduction">​</a></h2>
<p>HTTPChaos is a fault type provided by Chaos Mesh. By creating HTTPChaos experiments, you can simulate the fault scenarios during the HTTP request and response processing. Currently, HTTPChaos supports simulating the following fault types:</p>
<ul>
<li><code>abort</code>: interrupts the connection</li>
<li><code>delay</code>: injects latency into the request or response</li>
<li><code>replace</code>: replaces part of content in HTTP request or response messages</li>
<li><code>patch</code>: adds additional content to HTTP request or response messages</li>
</ul>
<p>HTTPChaos supports combinations of different fault types. If you have configured multiple HTTP fault types at the same time when creating HTTPChaos experiments, the order set to inject the faults when the experiments start running is <code>abort</code> -&gt; <code>delay</code> -&gt; <code>replace</code> -&gt; <code>patch</code>. When the <code>abort</code> fault cause short circuits, the connection will be directly interrupted.</p>
<p>For the detailed description of HTTPChaos configuration, see <a href="#field-description">Field description</a> below.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h2>
<p>Before injecting the faults supported by HTTPChaos, note the followings:</p>
<ul>
<li>There is no control manager of Chaos Mesh running on the target Pod.</li>
<li>The rules will affect both of clients and servers in the Pod, if you want to affect only one side, please refer to the <a href="#specify-side">specify side</a> section.</li>
<li>HTTPS accesses should be disabled, because injecting HTTPS connections is not supported currently.</li>
<li>For HTTPChaos injection to take effect, the client should avoid reusing TCP socket. This is because HTTPChaos does not affect the HTTP requests that are sent via TCP socket before the fault injection.</li>
<li>Use non-idempotent requests (such as most of the POST requests) with caution in production environments. If such requests are used, the target service may not return to normal status by repeating requests after the fault injection.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="create-experiments-using-chaos-dashboard">Create experiments using Chaos Dashboard<a href="#create-experiments-using-chaos-dashboard" class="hash-link" aria-label="Direct link to Create experiments using Chaos Dashboard" title="Direct link to Create experiments using Chaos Dashboard">​</a></h2>
<ol>
<li>
<p>Open Chaos Dashboard, and click <strong>NEW EXPERIMENT</strong> on the page to create a new experiment:</p>
<p></p><figure><img decoding="async" loading="lazy" alt="create an experiment" src="/assets/images/create-new-exp-1c53e87b7cbd0e5935aec8529fbbaea4.png" width="959" height="519" class="img_xWZi"><figcaption class="text--italic text--center" style="color:var(--ifm-color-content-secondary);font-size:0.875rem">create an experiment</figcaption></figure><p></p>
</li>
<li>
<p>In the <strong>Choose a Target</strong> area, choose <strong>HTTP FAULT</strong> and select a specific behavior, such as <code>RESPONSE ABORT</code>. Then fill out specific configurations.</p>
<p></p><figure><img decoding="async" loading="lazy" alt="create HTTP fault" src="/assets/images/create-new-httpchaos-f393051ca1c9c7fc3c5893dd9a024dc5.png" width="1085" height="1219" class="img_xWZi"><figcaption class="text--italic text--center" style="color:var(--ifm-color-content-secondary);font-size:0.875rem">create HTTP fault</figcaption></figure><p></p>
</li>
<li>
<p>Submit the experiment.</p>
<p>In the example above, you have configured injecting the &quot;Response abort&quot; fault into all requests of Port 80.</p>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="create-experiments-using-yaml-files">Create experiments using YAML files<a href="#create-experiments-using-yaml-files" class="hash-link" aria-label="Direct link to Create experiments using YAML files" title="Direct link to Create experiments using YAML files">​</a></h2>
<p>Chaos Mesh also supports using YAML configuration files to create HTTPChaos experiments. In a YAML file, you can simulate either one HTTP fault type or a combination of different HTTP fault types.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="example-of-abort">Example of <code>abort</code><a href="#example-of-abort" class="hash-link" aria-label="Direct link to example-of-abort" title="Direct link to example-of-abort">​</a></h3>
<ol>
<li>
<p>Write the experimental configuration to the <code>http-abort-failure.yaml</code> file as the example below:</p>
<div class="language-yaml codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-yaml codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chaos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.org/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPChaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">chaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labelSelectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">method</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">abort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">duration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5m</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Based on this configuration example, Chaos Mesh will inject the <code>abort</code> fault into the specified pod for 5 minutes. During the fault injection, the GET requests sent through port 80 in the <code>/api</code> path of the target Pod will be interrupted.</p>
</li>
<li>
<p>After the configuration file is prepared, use <code>kubectl</code> to create the experiment:</p>
<div class="language-bash codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-bash codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> ./http-abort-failure.yaml</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="example-of-fault-combinations">Example of fault combinations<a href="#example-of-fault-combinations" class="hash-link" aria-label="Direct link to Example of fault combinations" title="Direct link to Example of fault combinations">​</a></h3>
<ol>
<li>
<p>Write the experimental configuration to <code>http-failure.yaml</code> file as the example below:</p>
<div class="language-yaml codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-yaml codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chaos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.org/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPChaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">chaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labelSelectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">method</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">delay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /api/v2/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">method</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DELETE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">patch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;Token&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;one token&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;Token&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;another token&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">body</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JSON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;foo&quot;: &quot;bar&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">duration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5m</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Based on this configuration example, Chaos Mesh will inject the <code>delay</code> fault, <code>replace</code> fault, and <code>patch</code> fault consecutively.</p>
</li>
<li>
<p>After the configuration file is prepared, use <code>kubectl</code> to create the experiment:</p>
<div class="language-bash codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-bash codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> ./http-failure.yaml</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="field-description">Field description<a href="#field-description" class="hash-link" aria-label="Direct link to Field description" title="Direct link to Field description">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="description-for-common-fields">Description for common fields<a href="#description-for-common-fields" class="hash-link" aria-label="Direct link to Description for common fields" title="Direct link to Description for common fields">​</a></h3>
<p>Common fields are meaningful when the <code>target</code> of fault injection is <code>Request</code> or <code>Response</code>.</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Default value</th><th>Required</th><th>Example</th></tr></thead><tbody><tr><td><code>mode</code></td><td>string</td><td>Specifies the mode of the experiment. The mode options include <code>one</code> (selecting a random pod), <code>all</code> (selecting all eligible pods), <code>fixed</code> (selecting a specified number of eligible pods), <code>fixed-percent</code> (selecting a specified percentage of Pods from the eligible pods), and <code>random-max-percent</code> (selecting the maximum percentage of Pods from the eligible pods).</td><td></td><td>yes</td><td><code>one</code></td></tr><tr><td><code>value</code></td><td>string</td><td>Provides parameters for the <code>mode</code> configuration depending on the value of <code>mode</code>.</td><td></td><td>no</td><td>1</td></tr><tr><td><code>target</code></td><td>string</td><td>Specifies whether the target of fault injuection is <code>Request</code> or <code>Response</code>. The <a href="#description-for-target-related-fields"><code>target</code>-related fields</a> should be configured at the same time.</td><td></td><td>yes</td><td>Request</td></tr><tr><td><code>port</code></td><td>int32</td><td>The TCP port that the target service listens on.</td><td></td><td>yes</td><td>80</td></tr><tr><td><code>path</code></td><td>string</td><td>The URI path of the target request. Supports <a href="https://www.wikiwand.com/en/Matching_wildcards" target="_blank" rel="noopener noreferrer">Matching wildcards</a>.</td><td>Takes effect on all paths by default.</td><td>no</td><td>/api/*</td></tr><tr><td><code>method</code></td><td>string</td><td>The HTTP method of the target request method.</td><td>Takes effect for all methods by default.</td><td>no</td><td>GET</td></tr><tr><td><code>request_headers</code></td><td>map[string]string</td><td>Matches request headers to the target service.</td><td>Takes effect for all requests by default.</td><td>no</td><td>Content-Type: application/json</td></tr><tr><td><code>abort</code></td><td>bool</td><td>Indicates whether to inject the fault that interrupts the connection.</td><td>false</td><td>no</td><td>true</td></tr><tr><td><code>delay</code></td><td>string</td><td>Specifies the time for a latency fault.</td><td>0</td><td>no</td><td>10s</td></tr><tr><td><code>replace.headers</code></td><td>map[string]string</td><td>Specifies the key pair used to replace the request headers or response headers.</td><td></td><td>no</td><td>Content-Type: application/xml</td></tr><tr><td><code>replace.body</code></td><td>[]byte</td><td>Specifies request body or response body to replace the fault (Base64 encoded).</td><td></td><td>no</td><td>eyJmb28iOiAiYmFyIn0K</td></tr><tr><td><code>patch.headers</code></td><td>[][]string</td><td>Specifies the attached key pair of the request headers or response headers with patch faults.</td><td></td><td>no</td><td>- [Set-Cookie, one cookie]</td></tr><tr><td><code>patch.body.type</code></td><td>string</td><td>Specifies the type of patch faults of the request body or response body. Currently, it only supports <a href="https://tools.ietf.org/html/rfc7396" target="_blank" rel="noopener noreferrer"><code>JSON</code></a>.</td><td></td><td>no</td><td>JSON</td></tr><tr><td><code>patch.body.value</code></td><td>string</td><td>Specifies the fault of the request body or response body with patch faults.</td><td></td><td>no</td><td><code>{&quot;foo&quot;: &quot;bar&quot;}</code></td></tr><tr><td><code>duration</code></td><td>string</td><td>Specifies the duration of a specific experiment.</td><td></td><td>yes</td><td>30s</td></tr><tr><td><code>scheduler</code></td><td>string</td><td>Specifies the scheduling rules for the time of a specific experiment.</td><td></td><td>no</td><td>5 * * * *</td></tr><tr><td><code>tls.secretName</code></td><td>string</td><td>SecretName represents the name of required secret resource. The secrete must combined with data <code>{&quot;tls.certName&quot;:cert, &quot;tls.KeyName&quot;:key, &quot;tls.caName&quot;:ca}</code></td><td></td><td>no</td><td>&quot;http-tls-scr&quot;</td></tr><tr><td><code>tls.secretNamespace</code></td><td>string</td><td>SecretNamespace represents the namespace of required secret resource,should be the same with deployment/chaos-controller-manager in most cases</td><td></td><td>no</td><td>&quot;chaos-mesh&quot;</td></tr><tr><td><code>tls.certName</code></td><td>string</td><td>CertName represents the data name of cert file in secret, <code>tls.crt</code> for example</td><td></td><td>no</td><td>&quot;tls.crt&quot;</td></tr><tr><td><code>tls.KeyName</code></td><td>string</td><td>KeyName represents the data name of key file in secret, <code>tls.key</code> for example</td><td></td><td>no</td><td>&quot;tls.key&quot;</td></tr><tr><td><code>tls.caName</code></td><td>string</td><td>CAName represents the data name of ca file in secret, <code>ca.crt</code> for example</td><td></td><td>no</td><td>&quot;ca.crt&quot;</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-note admonition_WwPD alert alert--secondary"><div class="admonitionHeading_SEz7"><span class="admonitionIcon__iav"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_YFvI"><ul>
<li>
<p>When creating experiments with YAML files, <code>replace.body</code> must be the base64 encoding of the replacement content.</p>
</li>
<li>
<p>When creating experiments with the Kubernetes API, there is no need to encode the replacement content, just convert it to <code>[]byte</code> and put it into the <code>httpchaos.Spec.Replace.Body</code> field. The following is an example:</p>
</li>
</ul><div class="language-golang codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-golang codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">httpchaos.Spec.Replace.Body = []byte(`{&quot;foo&quot;: &quot;bar&quot;}`)</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="description-for-target-related-fields">Description for <code>target</code>-related fields<a href="#description-for-target-related-fields" class="hash-link" aria-label="Direct link to description-for-target-related-fields" title="Direct link to description-for-target-related-fields">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="request-related-fields"><code>Request</code>-related fields<a href="#request-related-fields" class="hash-link" aria-label="Direct link to request-related-fields" title="Direct link to request-related-fields">​</a></h4>
<p>The <code>Request</code> field is a meaningful when the <code>target</code> set to <code>Request</code> during the fault injection.</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Default value</th><th>Required</th><th>Example</th></tr></thead><tbody><tr><td><code>replace.path</code></td><td>string</td><td>Specifies the URI path used to replace content.</td><td></td><td>no</td><td>/api/v2/</td></tr><tr><td><code>replace.method</code></td><td>string</td><td>Specifies the replaced content of the HTTP request method.</td><td></td><td>no</td><td>DELETE</td></tr><tr><td><code>replace.queries</code></td><td>map[string]string</td><td>Specifies the replaced key pair of the URI query.</td><td></td><td>no</td><td>foo: bar</td></tr><tr><td><code>patch.queries</code></td><td>[][]string</td><td>Specifies the attached key pair of the URI query with patch faults.</td><td></td><td>no</td><td>- [foo, bar]</td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="respond-related-fields"><code>Respond</code>-related fields<a href="#respond-related-fields" class="hash-link" aria-label="Direct link to respond-related-fields" title="Direct link to respond-related-fields">​</a></h4>
<p>The <code>Response</code> is a meaningful when the <code>target</code> set to <code>Response</code> during the fault injection.</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Default value</th><th>Required</th><th>Example</th></tr></thead><tbody><tr><td><code>code</code></td><td>int32</td><td>Specifies the status code responded by <code>target</code>.</td><td>Takes effect for all status codes by default.</td><td>no</td><td>200</td></tr><tr><td><code>response_headers</code></td><td>map[string]string</td><td>Matches request headers to <code>target</code>.</td><td>Takes effect for all responses by default.</td><td>no</td><td>Content-Type: application/json</td></tr><tr><td><code>replace.code</code></td><td>int32</td><td>Specifies the replaced content of the response status code.</td><td></td><td>no</td><td>404</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="specify-side">Specify side<a href="#specify-side" class="hash-link" aria-label="Direct link to Specify side" title="Direct link to Specify side">​</a></h2>
<p>The rules will affect both of clients and servers in the Pod by default, but you can affect only one side by selecting the request headers.</p>
<p>This section provides some examples to specify the affected side, you can adjust the header selector in rules depend on your particular cases.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="client-side">Client side<a href="#client-side" class="hash-link" aria-label="Direct link to Client side" title="Direct link to Client side">​</a></h3>
<p>To inject faults into clients in the Pod without affecting servers, you can select the request/response by the <code>Host</code> header in the request.</p>
<p>For example, if you want to interrupt all requests to <code>http://example.com/</code>, you can apply the following YAML config:</p>
<div class="language-yaml codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-yaml codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chaos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.org/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPChaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labelSelectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> some</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">request_headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;example.com&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">abort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="server-side">Server side<a href="#server-side" class="hash-link" aria-label="Direct link to Server side" title="Direct link to Server side">​</a></h3>
<p>To inject faults into servers in the Pod without affecting clients, you can also select the request/response by the <code>Host</code> header in the request.</p>
<p>For example, if you want to interrupt all requests to your server behind service <code>nginx.nginx.svc</code>, you can apply the following YAML config:</p>
<div class="language-yaml codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-yaml codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chaos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.org/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPChaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labelSelectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">request_headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nginx.nginx.svc&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">abort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In other cases, especially when injecting the inbound request from outside, you may select the request/response by the <code>X-Forwarded-Host</code> header in the request.</p>
<p>For example, if you want to interrupt all requests to your server behind a public gateway <code>nginx.host.org</code>, you can apply the following YAML config:</p>
<div class="language-yaml codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-yaml codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chaos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.org/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HTTPChaos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labelSelectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">request_headers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">X-Forwarded-Host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nginx.host.org&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">abort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="tls">TLS<a href="#tls" class="hash-link" aria-label="Direct link to TLS" title="Direct link to TLS">​</a></h2>
<p>To inject faults inside connection base on TLS, user should use TLS mode. Our proxy play a proxy role here, so in TLS people both need to act as a remote server with a trustful CA , but also need to act as a client trust the server with some ca.</p>
<p>So in the secret data blow user need to create its&#x27; TLS keys &amp; CA &amp; CRT on their own.</p>
<div class="codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-text codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tls.certName&quot;:cert,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tls.KeyName&quot;:key,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tls.caName&quot;:ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If user need to create a new TLS server and inject the connection to it, they should:</p>
<ol>
<li>
<p>Create their own root CA&#x27;s private key and root CA&#x27;s certificate:</p>
<div class="codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-text codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -newkey rsa:4096  -x509  -sha512  -days 365 -nodes -out ca.crt -keyout ca.key</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create their server&#x27;s Certificate Signing Request:</p>
<div class="codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-text codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -out server.key 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -new -key server.key -out server.csr</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Write an extension file <code>server.ext</code> for the server like:</p>
<div class="codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-text codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">authorityKeyIdentifier=keyid,issuer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">basicConstraints=CA:FALSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subjectAltName = @alt_names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[alt_names]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP.1 = X.X.X.X</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Generate certificate of server:</p>
<div class="codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-text codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 365 -sha256 -extfile server.ext</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Add CA <code>ca.crt</code> to client.</p>
</li>
<li>
<p>Put <code>server.key</code>, <code>server.crt</code>, <code>ca.crt</code> into a secrete and give it to TLS mode.</p>
</li>
</ol>
<p>If user need to inject a client , they should act the proxy of HTTP Chaos like the remote server , you should just edit <code>server.ext</code> above to the specify domain.</p>
<p>Example:</p>
<div class="codeBlockContainer_Ck5W theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_mGxn"><pre tabindex="0" class="prism-code language-text codeBlock_gpM1 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__ALX"><span class="token-line" style="color:#393A34"><span class="token plain">subjectAltName = @alt_names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[alt_names]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DNS.1 = *.domain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP.1 = xxx.xxx.xxx.xxx</span><br></span></code></pre><div class="buttonGroup_Y3Wp"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_q2ha" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vesE"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_c42Q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_xHUa" id="local-debugging">Local debugging<a href="#local-debugging" class="hash-link" aria-label="Direct link to Local debugging" title="Direct link to Local debugging">​</a></h2>
<p>If you are not sure of the effects of certain fault injections, you can also test the corresponding features locally using <a href="https://github.com/chaos-mesh/rs-tproxy" target="_blank" rel="noopener noreferrer">rs-tproxy</a>. Chaos Mesh also provides HTTPChaos by using rs-tproxy.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/chaos-mesh/website/edit/master/versioned_docs/version-2.5.2/simulate-http-chaos-on-kubernetes.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_h6an" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_WwaV"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.5.2/simulate-gcp-chaos/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Simulate GCP Faults</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.5.2/simulate-block-chaos-on-kubernetes/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simulate Block Device Latency</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNUy thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#httpchaos-introduction" class="table-of-contents__link toc-highlight">HTTPChaos introduction</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li><li><a href="#create-experiments-using-chaos-dashboard" class="table-of-contents__link toc-highlight">Create experiments using Chaos Dashboard</a></li><li><a href="#create-experiments-using-yaml-files" class="table-of-contents__link toc-highlight">Create experiments using YAML files</a><ul><li><a href="#example-of-abort" class="table-of-contents__link toc-highlight">Example of <code>abort</code></a></li><li><a href="#example-of-fault-combinations" class="table-of-contents__link toc-highlight">Example of fault combinations</a></li></ul></li><li><a href="#field-description" class="table-of-contents__link toc-highlight">Field description</a><ul><li><a href="#description-for-common-fields" class="table-of-contents__link toc-highlight">Description for common fields</a></li><li><a href="#description-for-target-related-fields" class="table-of-contents__link toc-highlight">Description for <code>target</code>-related fields</a></li></ul></li><li><a href="#specify-side" class="table-of-contents__link toc-highlight">Specify side</a><ul><li><a href="#client-side" class="table-of-contents__link toc-highlight">Client side</a></li><li><a href="#server-side" class="table-of-contents__link toc-highlight">Server side</a></li></ul></li><li><a href="#tls" class="table-of-contents__link toc-highlight">TLS</a></li><li><a href="#local-debugging" class="table-of-contents__link toc-highlight">Local debugging</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start/">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/run-a-chaos-experiment/">Run a Chaos Experiment</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developer-guide-overview/">Developer Guide Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faqs/">FAQs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://community.cncf.io/chaos-mesh-community/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Community Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WtTX"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WtTX"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack (#project-chaos-mesh)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WtTX"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/chaos_mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WtTX"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Acknowledgements</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://storyset.com/technology" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks for the technology illustrations by Storyset<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WtTX"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/v3/img/components/netlify-color-bg.svg" alt="Deploys by Netlify">
                </a>
              </li><li class="footer__item">
                <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=3103bfa4-2073-4b9a-bdac-f36f63d979a4">
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <p style="font-weight: 500;">Copyright © Chaos Mesh Authors 2025 | Documentation Distributed under CC-BY-4.0</p>
        © 2025 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.
      </div></div></div></footer></div>
</body>
</html>