<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-90760217-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Chaos Mesh¬Æ" href="/opensearch.xml"><title data-react-helmet="true">How a Top Game Company Uses Chaos Engineering to Improve Testing | Chaos Mesh¬Æ</title><meta data-react-helmet="true" property="og:title" content="How a Top Game Company Uses Chaos Engineering to Improve Testing | Chaos Mesh¬Æ"><meta data-react-helmet="true" name="description" content="How-a-Top-Game-Company-Uses-Chaos-Engineering-to-Improve-Testing"><meta data-react-helmet="true" property="og:description" content="How-a-Top-Game-Company-Uses-Chaos-Engineering-to-Improve-Testing"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="https://chaos-mesh.org/img/fuxi-case-banner.jpg"><meta data-react-helmet="true" property="twitter:image" content="https://chaos-mesh.org/img/fuxi-case-banner.jpg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for How a Top Game Company Uses Chaos Engineering to Improve Testing"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.00e58ba1.css">
<link rel="preload" href="/styles.711ba274.js" as="script">
<link rel="preload" href="/runtime~main.d2ec4c1b.js" as="script">
<link rel="preload" href="/main.5e501868.js" as="script">
<link rel="preload" href="/1.f3470504.js" as="script">
<link rel="preload" href="/2.9667c0c4.js" as="script">
<link rel="preload" href="/ccc49370.e3cababa.js" as="script">
<link rel="preload" href="/e3f34e86.33c0a81e.js" as="script">
<link rel="preload" href="/0b7a903d.cafb4949.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_3046 navbarHidden_1Uo_"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logos/logo-mini.svg" alt="Chaos Mesh Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/logos/logo-mini-white.svg" alt="Chaos Mesh Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Chaos Mesh¬Æ</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/">1.1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">Next</a></li><li><a class="dropdown__link" href="/docs/">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.3/">1.0.3</a></li><li><a class="dropdown__link" href="/docs/0.9.1/">0.9.1</a></li></ul></div><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/interactiveTutorial">Interactive Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">‚åò</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logos/logo-mini.svg" alt="Chaos Mesh Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/logos/logo-mini-white.svg" alt="Chaos Mesh Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Chaos Mesh¬Æ</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">1.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.3/">1.0.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.9.1/">0.9.1</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/interactiveTutorial">Interactive Tutorial</a></li><li class="menu__list-item"><a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_3I7I thin-scrollbar"><h3 class="sidebarItemTitle_2Dv3">Recent posts</h3><ul class="sidebarItemList_1RlG"><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/how-to-simulate-io-faults-at-runtime">How to Simulate I/O Faults at Runtime?</a></li><li class="sidebarItem_Hxgp"><a aria-current="page" class="sidebarItemLink_3ppv sidebarItemLinkActive_3XUi" href="/blog/how-a-top-game-company-uses-chaos-engineering-to-improve-testing">How a Top Game Company Uses Chaos Engineering to Improve Testing</a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/chaos-engineering-breaking-things-intentionally">Chaos Engineering - Breaking things Intentionally</a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/chaos-mesh-x-hacktoberfest-2020">Chaos Mesh X Hacktoberfest 2020 - An Invitation to Open Source</a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/chaos-mesh-1.0-chaos-engineering-on-kubernetes-made-easier">Chaos Mesh 1.0: Chaos Engineering on Kubernetes Made Easier</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_1mse">How a Top Game Company Uses Chaos Engineering to Improve Testing</h1><div class="margin-vert--md"><time datetime="2020-11-26T00:00:00.000Z" class="blogPostDate_3bQP">November 26, 2020  ¬∑ 4 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a target="_blank" rel="noreferrer noopener">Hui Zhang @ Fuxi Lab, NetEase</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p><img alt="How-a-Top-Game-Company-Uses-Chaos-Engineering-to-Improve-Testing" src="/assets/images/fuxi-case-banner-533004456baeaec37f72c0d6aaed0f2b.jpg"></p><p>NetEase Fuxi AI Lab is China‚Äôs first professional game AI research institution. In their search for a Chaos Engineering tool to test their Kubernetes-based AI training platform, they chose Chaos Mesh and have improved their system resiliency ever since.</p><p>NetEase Fuxi AI Lab is China‚Äôs first professional game AI research institution. Researchers use our Kubernetes-based Danlu platform for algorithm development, training and tuning, and online publishing. Thanks to the integration with Kubernetes, our platform is much more efficient. However, due to Kubernetes- and microservices-related issues, we are constantly testing and improving our platform to make it more stable.</p><p>In this article, I‚Äôll discuss one of our most valuable testing tools, <a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer">Chaos Mesh</a>. Chaos Mesh is an open-source Chaos Engineering tool that provides a wide range of fault injections and excellent fault monitoring through its Dashboard.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="why-chaos-mesh"></a>Why Chaos Mesh<a class="hash-link" href="#why-chaos-mesh" title="Direct link to heading">#</a></h2><p>We started our search for a Chaos Engineering tool in 2018. We were looking for a tool with:</p><ul><li><p>Cloud-native support. Kubernetes is practically the de facto standard for service orchestration and scheduling, and the application runtime has been fully standardized. For applications that run entirely on K8s, cloud-native support is a must for any tools that go with them.</p></li><li><p>Sufficient fault injection types. For stateful services, network failure simulation is particularly important. The platform must be able to simulate failures at different levels, such as Pods, network, and I/O.</p></li><li><p>Good observability. Knowing when a fault is injected and when it can be recovered is vital for us to tell whether there is an abnormality in the application.</p></li><li><p>Active community support. We want to use an open-source project that is thoroughly tested and consistently maintained. That‚Äôs why we value sustained and timely community support.</p></li><li><p>No intrusion on existing applications, with no domain knowledge required.</p></li><li><p>Actual use cases for us to evaluate and build upon.</p></li></ul><p>In 2019, when Chaos Mesh, a Chaos Engineering platform for Kubernetes was open-sourced, we found the tool we were looking for. It was still in its early stage; however, we were immediately struck with the richness of fault types it supported. This was a big advantage over other chaos engineering tools, because, to a certain degree, it determines the number of issues that we can locate in the system. We instantly realized that Chaos Mesh met our expectations in almost every way.</p><p><img alt="Chaos Mesh architecture" src="/assets/images/chaos-mesh-architecture-c61ce59a7a241d180a6156b8a6202f34.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="our-journey-with-chaos-mesh"></a>Our journey with Chaos Mesh<a class="hash-link" href="#our-journey-with-chaos-mesh" title="Direct link to heading">#</a></h2><p>Chaos Mesh has helped us find several important bugs. For example, it detected a brain-split issue in <a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">rabbitMQ</a>, the open-source message-queueing software for Danlu. According to <a href="https://en.wikipedia.org/wiki/Split-brain" target="_blank" rel="noopener noreferrer">Wikipedia</a>, ‚Äúa split-brain condition indicates data or availability inconsistencies originating from the maintenance of two separate data sets with overlap in scope.‚Äù When a rabbitMQ cluster has a brain split error, there will be data write conflicts or errors, which cause more serious problems such as data inconsistencies in the messaging service. As shown in our architecture below, when brain split happens, consumers do not function normally and keep reporting server exceptions.</p><p><img alt="Architecture of a RabbitMQ cluster" src="/assets/images/architecture-of-a-rabbitmq-cluster-dde2aba82a73d21c4cb35ab9035b844e.png"></p><p>With Chaos Mesh, we could stably reproduce this issue by injecting <code>pod-kill</code> faults into our container instances cloud.</p><p>Chaos Mesh also found several other issues including a startup failure, a join failure for crashed broker clusters, a heartbeat timeout, and a connection channel shutdown. Over time, our development team fixed these issues and greatly improved the stability of the Danlu platform.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="a-fast-growing-project"></a>A fast-growing project<a class="hash-link" href="#a-fast-growing-project" title="Direct link to heading">#</a></h2><p>Chaos Mesh is constantly updated and improved. When we first adopted it, it hadn‚Äôt even reached a stable version. It didn‚Äôt have a debugging or log collection tool, and the Dashboard component only applied to TiDB. The only way we could use Chaos Mesh to test other applications was to execute the YAML configuration file via <code>kubectl apply</code>.</p><p><a href="https://chaos-mesh.org/blog/chaos-mesh-1.0-chaos-engineering-on-kubernetes-made-easier" target="_blank" rel="noopener noreferrer">Chaos Mesh 1.0</a> fixed or improved most of these limitations. It offers more fine-grained and powerful chaos support, a generally-available Chaos Dashboard, enhanced observability, and more accurate chaos scope control. These are all driven by an open, collaborative, and vibrant community.</p><p><img alt="Chaos Dashboard is now generally available" src="/assets/images/chaos-dashboard-0a1e48c54968d276f174801a1364ce21.gif"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="looking-forward"></a>Looking forward<a class="hash-link" href="#looking-forward" title="Direct link to heading">#</a></h2><p>It‚Äôs amazing to see how much Chaos Mesh has grown and how much traction it‚Äôs gaining. We‚Äôre also happy with what we have achieved with it.</p><p>However, Chaos Engineering is a big area to work on. In the future, we‚Äôd like to see the following features:</p><ul><li><p>Atomic fault injection</p></li><li><p>Unattended fault inject that combines customized fault types with standardized methods to validate experimental objects</p></li><li><p>Standard test cases for general components such as MySQL, Redis, and Kafka</p></li></ul><p>We‚Äôve discussed these features with those who maintain Chaos Mesh, and they said these features are on the Chaos Mesh 2.0 roadmap.</p><p>If you are interested, join the Chaos Mesh community via <a href="https://cloud-native.slack.com/" target="_blank" rel="noopener noreferrer">Slack</a> (#project-chaos-mesh) or <a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer">GitHub</a>.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/chaos-mesh">Chaos Mesh</a><a class="margin-horiz--sm" href="/blog/tags/chaos-engineering">Chaos Engineering</a></div></footer></article><div><a href="https://github.com/chaos-mesh/website/edit/master/blog/2020-11-26-how-a-top-game-company-uses-chaos-engineering-to-improve-testing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/how-to-simulate-io-faults-at-runtime"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ How to Simulate I/O Faults at Runtime?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/chaos-engineering-breaking-things-intentionally"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Chaos Engineering - Breaking things Intentionally ¬ª</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-chaos-mesh" class="table-of-contents__link">Why Chaos Mesh</a></li><li><a href="#our-journey-with-chaos-mesh" class="table-of-contents__link">Our journey with Chaos Mesh</a></li><li><a href="#a-fast-growing-project" class="table-of-contents__link">A fast-growing project</a></li><li><a href="#looking-forward" class="table-of-contents__link">Looking forward</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a href="https://chaos-mesh.org/docs/get_started/get_started_on_kind" target="_blank" rel="noopener noreferrer" class="footer__link-item">Getting Started</a></li><li class="footer__item"><a href="https://chaos-mesh.org/docs/user_guides/installation" target="_blank" rel="noopener noreferrer" class="footer__link-item">User Guides</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/chaos_mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://join.slack.com/t/cloud-native/shared_invite/zt-fyy3b8up-qHeDNVqbz1j8HDY6g1cY4w" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack (#project-chaos-mesh)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/chaos-mesh/chaos-mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Others</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify"></a></li></ul></div></div><div class="text--center"><div>
        <br>
        <strong>¬© Chaos Mesh¬Æ Authors 2021 | Documentation Distributed under CC-BY-4.0 </strong>
        <br>
        <br>
        ¬© 2021 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.
      </div></div></div></footer></div>
<script src="/styles.711ba274.js"></script>
<script src="/runtime~main.d2ec4c1b.js"></script>
<script src="/main.5e501868.js"></script>
<script src="/1.f3470504.js"></script>
<script src="/2.9667c0c4.js"></script>
<script src="/ccc49370.e3cababa.js"></script>
<script src="/e3f34e86.33c0a81e.js"></script>
<script src="/0b7a903d.cafb4949.js"></script>
</body>
</html>